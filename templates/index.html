<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Select Language</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <style>
      body {
        transition: background-color 0.5s ease, color 0.5s ease;
      }
      /* Dark mode overrides - matched to your Bootstrap theme */
      body.dark-mode {
        background-color: #121212; /* Very dark background from your Bootstrap theme */
        color: #e0e0e0; /* Light text for dark mode from your Bootstrap theme */
      }

      /* Light mode language links */
      .lang-link {
        background-color: white;
        color: #212529; /* dark text */
        transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Added shadow for consistency with movie cards */
      }
      .lang-link:hover {
        background-color: #333; /* dark hover background */
        color: white;
        transform: translateY(-2px); /* Slight lift on hover */
        box-shadow: 0 6px 12px rgba(0,0,0,0.2); /* Enhanced shadow on hover */
      }
      /* Dark mode language links - matched to your Bootstrap theme card styles */
      body.dark-mode .lang-link {
        background-color: #1e1e1e; /* Slightly lighter dark for cards from your Bootstrap theme */
        color: #e0e0e0;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      }
      body.dark-mode .lang-link:hover {
        background-color: #343a40; /* Similar to card hover in Bootstrap theme */
        color: white;
        box-shadow: 0 6px 12px rgba(0,0,0,0.4);
      }

      /* Dark mode error text - matched to your Bootstrap theme alert */
      body.dark-mode .error-text {
        color: #ffc107; /* Warning yellow for text, stands out more than red */
      }

      /* Dark mode H1 text - matched to your Bootstrap theme */
      body.dark-mode h1 {
        color: #ffffff; /* White heading text */
      }

      /* Toggle button */
      #toggleDarkMode {
        position: fixed;
        top: 1rem;
        right: 1rem;
        background-color: #333; /* dark background */
        color: white;
        border: none;
        border-radius: 0.375rem;
        padding: 0.5rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s ease;
        width: 2.5rem;
        height: 2.5rem;
        z-index: 1000;
      }
      #toggleDarkMode:hover {
        background-color: #555;
      }
      /* Icon size */
      #modeIcon {
        font-size: 1.25rem;
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
</head>
<body class="bg-gray-100 p-8">
    <button id="toggleDarkMode" aria-label="Toggle dark mode" title="Toggle dark mode">
        <i id="modeIcon" class="bi bi-moon-fill"></i>
    </button>

    <h1 class="text-3xl font-bold text-center mb-6">Choose a Language</h1>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
        {% for lang in languages %}
        <a href="/language/{{ lang }}" class="block text-center lang-link p-4 rounded shadow capitalize font-semibold">
            {{ lang }}
        </a>
        {% endfor %}
    </div>
    {% if error %}
    <p class="error-text text-center text-red-500 mt-4">{{ error }}</p>
    {% endif %}

    <script>
      const toggleButton = document.getElementById('toggleDarkMode');
      const body = document.body;
      const modeIcon = document.getElementById('modeIcon');

      function updateIcon() {
          if (body.classList.contains('dark-mode')) {
              modeIcon.classList.remove('bi-moon-fill');
              modeIcon.classList.add('bi-sun-fill');
          } else {
              modeIcon.classList.remove('bi-sun-fill');
              modeIcon.classList.add('bi-moon-fill');
          }
      }

      // Load saved preference on page load
      if (localStorage.getItem('dark-mode') === 'enabled') {
          body.classList.add('dark-mode');
      }
      updateIcon();

      toggleButton.addEventListener('click', () => {
          body.classList.toggle('dark-mode');
          const isDarkMode = body.classList.contains('dark-mode');
          localStorage.setItem('dark-mode', isDarkMode ? 'enabled' : 'disabled');
          updateIcon();
      });
    </script>
</body>
</html>
